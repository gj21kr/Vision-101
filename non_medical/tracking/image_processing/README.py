# 객체 추적 알고리즘 문제점 분석 및 해결 방안

## 각 추적 알고리즘의 문제점 분석

| 알고리즘                | 문제점                                   | 원인 분석 |
|------------------------|------------------------------------------|-----------|
| **KCF / MOSSE / CSRT** | 추적 실패 (Tracking Failure):<br>추적하던 객체가 다른 객체와 겹치거나 배경과 유사해지는 순간, 바운딩 박스가 사라지거나 엉뚱한 곳으로 튐 | 상관 필터는 객체의 외형 템플릿을 기반으로 추적.<br>방해물이 추적 대상과 유사하면 필터가 방해물을 따라가다가 대상을 놓침 |
| **CamShift / Particle Filter** | ID 스위치 (Identity Switch):<br>추적하던 객체(A)가 다른 객체(B)와 교차할 때, 추적기가 객체 B를 따라감 | 색상 분포(히스토그램) 기반 추적.<br>비슷한 색상의 옷을 입은 사람이 많아 변별력 저하, 더 큰/가까운 객체로 ID 변경 |
| **KLT (feature_based)** | 특징점 유실 및 분산:<br>객체가 겹치면 특징점들이 흩어져 추적 중심을 잃음 | 객체 내 고유 특징점(코너) 추적.<br>가림, 자세 변화로 특징점 소실 시 추적 불가. 바운딩 박스 개념 부재로 범위 한정 어려움 |
| **Kalman Filter**      | 잘못된 측정값에 취약:<br>흰색 감지로 위치 측정 시, 다른 흰색 객체 등장 시 필터가 그쪽으로 끌림 | 칼만 필터는 시각적 특징을 이해하지 못하고 측정 좌표값에만 의존.<br>측정 단계(색상 감지)가 불안정하면 전체 예측/보정 과정 흔들림 |

---

## 근본적인 문제와 해결 방안

위 문제들은 모두 **단일 객체 추적(Single Object Tracking, SOT)**의 본질적인 한계에서 비롯됩니다. SOT 알고리즘들은 "영상에 추적할 대상은 단 하나뿐"이라고 가정하기 때문에, 여러 유사한 객체가 등장하는 복잡한 시나리오에 매우 취약합니다.

### 해결 방안: Tracking-by-Detection 기반의 다중 객체 추적 (MOT)

MOT는 SOT와 접근 방식이 다릅니다. 하나의 객체를 끝까지 따라가는 대신, 아래의 두 단계를 반복합니다.

1. **탐지 (Detection):**  
   매 프레임마다 YOLO와 같은 객체 탐지기를 실행하여 영상에 있는 모든 객체의 위치를 찾습니다.
2. **연관 (Association):**  
   이전 프레임에서 추적하던 객체들과 현재 프레임에서 새로 탐지된 객체들을 서로 연결(연관)하여 ID를 할당하거나 유지합니다.  
   이 "연관" 과정이 MOT의 핵심입니다.

---

## 구체적인 구현 방법: SORT (Simple Online and Realtime Tracking) 알고리즘

1. **YOLO로 모든 사람 탐지:**  
   매 프레임마다 YOLO를 실행해 모든 사람의 바운딩 박스를 얻습니다.
2. **칼만 필터로 위치 예측:**  
   현재 추적 중인 각 객체에 대해 칼만 필터를 사용하여 다음 프레임에서의 위치를 예측합니다.
3. **IoU로 연관:**  
   예측된 바운딩 박스와 새로 탐지된 바운딩 박스 간의 **IoU(Intersection over Union)**를 계산합니다.
4. **ID 할당:**  
   IoU가 가장 높은 쌍들을 동일한 객체로 판단하여 ID를 유지합니다.  
   예측과 매칭되지 않은 새로운 탐지 결과에는 새로운 ID를 부여하고, 일정 시간 동안 탐지되지 않는 기존 객체는 추적 목록에서 제거합니다.

> 이 방식을 사용하면 여러 객체가 서로 교차하거나 잠시 가려져도, 탐지기가 다시 객체를 찾아내는 한 높은 확률로 동일한 ID를 유지하며 안정적으로 추적할 수 있습니다.